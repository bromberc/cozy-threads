{"ast":null,"code":"var _jsxFileName = \"/Users/carolinebromberg/Desktop/cozy-threads/frontend/src/Components/Checkout.js\",\n  _s = $RefreshSig$();\nimport { useCallback, useEffect, useState } from 'react';\nimport * as React from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { EmbeddedCheckoutProvider, EmbeddedCheckout } from '@stripe/react-stripe-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe('pk_live_51PhD3vRpA6VhXFHy5CdMHlEl7CtPIOHZ2Fu7dQunAd3K469wh3QlBpjBdN1q3EAom5VC66VTihMoO9dvEH1abBvk00hqBsWmcq');\n// const stripePromise = loadStripe('pk_test_51PhD3vRpA6VhXFHyxmLK6FulsNNbjpryVlJSkrtFtjzLugoVzNXelUkPGhOCormKHkV3hYJhZXxXYIe7gbhG3VQZ00qlgwq4nW');\n\nconst Checkout = ({\n  cart\n}) => {\n  _s();\n  const [clientSecret, setClientSecret] = useState('');\n  const [isComplete, setIsComplete] = useState(false);\n  const handleComplete = () => setIsComplete(true);\n  const fetchClientSecret = useCallback(async () => {\n    try {\n      const response = await fetch(\"http://localhost:4242/create-checkout-session\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          items: cart\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Server error: ${response.statusText}`);\n      }\n      const data = await response.json();\n      setClientSecret(data.clientSecret);\n    } catch (error) {\n      console.error(\"Failed to fetch client secret:\", error);\n    }\n  }, [cart]);\n  useEffect(() => {\n    fetchClientSecret();\n  }, [cart, fetchClientSecret]);\n  const options = {\n    clientSecret\n  };\n  return isComplete ? /*#__PURE__*/_jsxDEV(PurchaseSummary, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 26\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"checkout\",\n    children: clientSecret && /*#__PURE__*/_jsxDEV(EmbeddedCheckoutProvider, {\n      stripe: stripePromise,\n      options: options,\n      children: /*#__PURE__*/_jsxDEV(EmbeddedCheckout, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n_s(Checkout, \"laV5lHsGW2F2dIIIJfJzCLgLipE=\");\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["useCallback","useEffect","useState","React","loadStripe","EmbeddedCheckoutProvider","EmbeddedCheckout","jsxDEV","_jsxDEV","stripePromise","Checkout","cart","_s","clientSecret","setClientSecret","isComplete","setIsComplete","handleComplete","fetchClientSecret","response","fetch","method","headers","body","JSON","stringify","items","ok","Error","statusText","data","json","error","console","options","PurchaseSummary","fileName","_jsxFileName","lineNumber","columnNumber","id","children","stripe","_c","$RefreshReg$"],"sources":["/Users/carolinebromberg/Desktop/cozy-threads/frontend/src/Components/Checkout.js"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport * as React from 'react';\nimport {loadStripe} from '@stripe/stripe-js';\nimport {\n  EmbeddedCheckoutProvider,\n  EmbeddedCheckout\n} from '@stripe/react-stripe-js';\nconst stripePromise = loadStripe('pk_live_51PhD3vRpA6VhXFHy5CdMHlEl7CtPIOHZ2Fu7dQunAd3K469wh3QlBpjBdN1q3EAom5VC66VTihMoO9dvEH1abBvk00hqBsWmcq');\n// const stripePromise = loadStripe('pk_test_51PhD3vRpA6VhXFHyxmLK6FulsNNbjpryVlJSkrtFtjzLugoVzNXelUkPGhOCormKHkV3hYJhZXxXYIe7gbhG3VQZ00qlgwq4nW');\n\nconst Checkout = ({cart}) => {\n    const [clientSecret, setClientSecret] = useState('');\n    const [isComplete, setIsComplete] = useState(false);\n    const handleComplete = () => setIsComplete(true);\n    const fetchClientSecret = useCallback(async () => {\n        try {\n            const response = await fetch(\"http://localhost:4242/create-checkout-session\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({ items: cart })\n            });\n\n            if (!response.ok) {\n                throw new Error(`Server error: ${response.statusText}`);\n            }\n\n            const data = await response.json();\n            setClientSecret(data.clientSecret);\n        } catch (error) {\n            console.error(\"Failed to fetch client secret:\", error);\n        }\n    }, [cart]);\n\n    useEffect(() => {\n        fetchClientSecret();\n    }, [cart, fetchClientSecret]);\n    \n    const options = { clientSecret };\n\n    return isComplete ? (<PurchaseSummary />) : (\n        <div id=\"checkout\">\n            {clientSecret && (\n                <EmbeddedCheckoutProvider\n                    stripe={stripePromise}\n                    options={options}\n                >\n                    <EmbeddedCheckout/>\n                </EmbeddedCheckoutProvider>\n            )}\n        </div>\n    );\n}\n\nexport default Checkout;"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACxD,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,SAAQC,UAAU,QAAO,mBAAmB;AAC5C,SACEC,wBAAwB,EACxBC,gBAAgB,QACX,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AACjC,MAAMC,aAAa,GAAGL,UAAU,CAAC,6GAA6G,CAAC;AAC/I;;AAEA,MAAMM,QAAQ,GAAGA,CAAC;EAACC;AAAI,CAAC,KAAK;EAAAC,EAAA;EACzB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACa,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMe,cAAc,GAAGA,CAAA,KAAMD,aAAa,CAAC,IAAI,CAAC;EAChD,MAAME,iBAAiB,GAAGlB,WAAW,CAAC,YAAY;IAC9C,IAAI;MACA,MAAMmB,QAAQ,GAAG,MAAMC,KAAK,CAAC,+CAA+C,EAAE;QAC1EC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACL,cAAc,EAAE;QACpB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,KAAK,EAAEf;QAAK,CAAC;MACxC,CAAC,CAAC;MAEF,IAAI,CAACQ,QAAQ,CAACQ,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,iBAAiBT,QAAQ,CAACU,UAAU,EAAE,CAAC;MAC3D;MAEA,MAAMC,IAAI,GAAG,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;MAClCjB,eAAe,CAACgB,IAAI,CAACjB,YAAY,CAAC;IACtC,CAAC,CAAC,OAAOmB,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IAC1D;EACJ,CAAC,EAAE,CAACrB,IAAI,CAAC,CAAC;EAEVV,SAAS,CAAC,MAAM;IACZiB,iBAAiB,CAAC,CAAC;EACvB,CAAC,EAAE,CAACP,IAAI,EAAEO,iBAAiB,CAAC,CAAC;EAE7B,MAAMgB,OAAO,GAAG;IAAErB;EAAa,CAAC;EAEhC,OAAOE,UAAU,gBAAIP,OAAA,CAAC2B,eAAe;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC,gBACpC/B,OAAA;IAAKgC,EAAE,EAAC,UAAU;IAAAC,QAAA,EACb5B,YAAY,iBACTL,OAAA,CAACH,wBAAwB;MACrBqC,MAAM,EAAEjC,aAAc;MACtByB,OAAO,EAAEA,OAAQ;MAAAO,QAAA,eAEjBjC,OAAA,CAACF,gBAAgB;QAAA8B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG;EAC7B;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CACR;AACL,CAAC;AAAA3B,EAAA,CA3CKF,QAAQ;AAAAiC,EAAA,GAARjC,QAAQ;AA6Cd,eAAeA,QAAQ;AAAC,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}