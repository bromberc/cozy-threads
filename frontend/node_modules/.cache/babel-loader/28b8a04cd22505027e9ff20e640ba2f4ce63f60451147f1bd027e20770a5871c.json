{"ast":null,"code":"import{useCallback,useEffect,useState}from'react';import*as React from'react';import{loadStripe}from'@stripe/stripe-js';import{EmbeddedCheckoutProvider,EmbeddedCheckout,PurchaseSummary}from'@stripe/react-stripe-js';import{jsx as _jsx}from\"react/jsx-runtime\";const stripePromise=loadStripe('pk_live_51PhD3vRpA6VhXFHy5CdMHlEl7CtPIOHZ2Fu7dQunAd3K469wh3QlBpjBdN1q3EAom5VC66VTihMoO9dvEH1abBvk00hqBsWmcq');const Checkout=_ref=>{let{cart}=_ref;const[clientSecret,setClientSecret]=useState('');const[isComplete,setIsComplete]=useState(false);const handleComplete=()=>setIsComplete(true);const fetchClientSecret=useCallback(async()=>{try{const response=await fetch(\"http://localhost:4242/create-checkout-session\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({items:cart})});if(!response.ok){throw new Error(\"Server error: \".concat(response.statusText));}const data=await response.json();setClientSecret(data.clientSecret);}catch(error){console.error(\"Failed to fetch client secret:\",error);}},[cart]);useEffect(()=>{fetchClientSecret();},[cart,fetchClientSecret]);const options={clientSecret};return isComplete?/*#__PURE__*/_jsx(PurchaseSummary,{}):/*#__PURE__*/_jsx(\"div\",{id:\"checkout\",children:clientSecret&&/*#__PURE__*/_jsx(EmbeddedCheckoutProvider,{stripe:stripePromise,options:{...options,onComplete:handleComplete},children:/*#__PURE__*/_jsx(EmbeddedCheckout,{})})});};export default Checkout;","map":{"version":3,"names":["useCallback","useEffect","useState","React","loadStripe","EmbeddedCheckoutProvider","EmbeddedCheckout","PurchaseSummary","jsx","_jsx","stripePromise","Checkout","_ref","cart","clientSecret","setClientSecret","isComplete","setIsComplete","handleComplete","fetchClientSecret","response","fetch","method","headers","body","JSON","stringify","items","ok","Error","concat","statusText","data","json","error","console","options","id","children","stripe","onComplete"],"sources":["/Users/carolinebromberg/Desktop/cozy-threads/frontend/src/Components/Checkout.js"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport * as React from 'react';\nimport {loadStripe} from '@stripe/stripe-js';\nimport {\n  EmbeddedCheckoutProvider,\n  EmbeddedCheckout,\n  PurchaseSummary\n} from '@stripe/react-stripe-js';\nconst stripePromise = loadStripe('pk_live_51PhD3vRpA6VhXFHy5CdMHlEl7CtPIOHZ2Fu7dQunAd3K469wh3QlBpjBdN1q3EAom5VC66VTihMoO9dvEH1abBvk00hqBsWmcq');\n\nconst Checkout = ({cart}) => {\n    const [clientSecret, setClientSecret] = useState('');\n    const [isComplete, setIsComplete] = useState(false);\n    const handleComplete = () => setIsComplete(true);\n    const fetchClientSecret = useCallback(async () => {\n        try {\n            const response = await fetch(\"http://localhost:4242/create-checkout-session\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({ items: cart })\n            });\n\n            if (!response.ok) {\n                throw new Error(`Server error: ${response.statusText}`);\n            }\n\n            const data = await response.json();\n            setClientSecret(data.clientSecret);\n        } catch (error) {\n            console.error(\"Failed to fetch client secret:\", error);\n        }\n    }, [cart]);\n\n    useEffect(() => {\n        fetchClientSecret();\n    }, [cart, fetchClientSecret]);\n    \n    const options = { clientSecret };\n\n    return isComplete ? (<PurchaseSummary />) : (\n        <div id=\"checkout\">\n            {clientSecret && (\n                <EmbeddedCheckoutProvider\n                    stripe={stripePromise}\n                    options={{...options, onComplete: handleComplete}}\n                >\n                    <EmbeddedCheckout/>\n                </EmbeddedCheckoutProvider>\n            )}\n        </div>\n    );\n}\n\nexport default Checkout;"],"mappings":"AAAA,OAASA,WAAW,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACxD,MAAO,GAAK,CAAAC,KAAK,KAAM,OAAO,CAC9B,OAAQC,UAAU,KAAO,mBAAmB,CAC5C,OACEC,wBAAwB,CACxBC,gBAAgB,CAChBC,eAAe,KACV,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBACjC,KAAM,CAAAC,aAAa,CAAGN,UAAU,CAAC,6GAA6G,CAAC,CAE/I,KAAM,CAAAO,QAAQ,CAAGC,IAAA,EAAY,IAAX,CAACC,IAAI,CAAC,CAAAD,IAAA,CACpB,KAAM,CAACE,YAAY,CAAEC,eAAe,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACc,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAAAgB,cAAc,CAAGA,CAAA,GAAMD,aAAa,CAAC,IAAI,CAAC,CAChD,KAAM,CAAAE,iBAAiB,CAAGnB,WAAW,CAAC,SAAY,CAC9C,GAAI,CACA,KAAM,CAAAoB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,+CAA+C,CAAE,CAC1EC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,KAAK,CAAEd,IAAK,CAAC,CACxC,CAAC,CAAC,CAEF,GAAI,CAACO,QAAQ,CAACQ,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,kBAAAC,MAAA,CAAkBV,QAAQ,CAACW,UAAU,CAAE,CAAC,CAC3D,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAZ,QAAQ,CAACa,IAAI,CAAC,CAAC,CAClClB,eAAe,CAACiB,IAAI,CAAClB,YAAY,CAAC,CACtC,CAAE,MAAOoB,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CAC1D,CACJ,CAAC,CAAE,CAACrB,IAAI,CAAC,CAAC,CAEVZ,SAAS,CAAC,IAAM,CACZkB,iBAAiB,CAAC,CAAC,CACvB,CAAC,CAAE,CAACN,IAAI,CAAEM,iBAAiB,CAAC,CAAC,CAE7B,KAAM,CAAAiB,OAAO,CAAG,CAAEtB,YAAa,CAAC,CAEhC,MAAO,CAAAE,UAAU,cAAIP,IAAA,CAACF,eAAe,GAAE,CAAC,cACpCE,IAAA,QAAK4B,EAAE,CAAC,UAAU,CAAAC,QAAA,CACbxB,YAAY,eACTL,IAAA,CAACJ,wBAAwB,EACrBkC,MAAM,CAAE7B,aAAc,CACtB0B,OAAO,CAAE,CAAC,GAAGA,OAAO,CAAEI,UAAU,CAAEtB,cAAc,CAAE,CAAAoB,QAAA,cAElD7B,IAAA,CAACH,gBAAgB,GAAC,CAAC,CACG,CAC7B,CACA,CACR,CACL,CAAC,CAED,cAAe,CAAAK,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}