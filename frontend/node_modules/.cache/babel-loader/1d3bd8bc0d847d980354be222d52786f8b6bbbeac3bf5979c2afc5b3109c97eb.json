{"ast":null,"code":"var _jsxFileName = \"/Users/carolinebromberg/Desktop/cozy-threads/frontend/src/Components/Checkout.js\",\n  _s = $RefreshSig$();\nimport { useCallback, useEffect } from 'react';\nimport * as React from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { EmbeddedCheckoutProvider, EmbeddedCheckout } from '@stripe/react-stripe-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe('pk_live_51PhD3vRpA6VhXFHy5CdMHlEl7CtPIOHZ2Fu7dQunAd3K469wh3QlBpjBdN1q3EAom5VC66VTihMoO9dvEH1abBvk00hqBsWmcq');\nconst Checkout = ({\n  cart\n}) => {\n  _s();\n  const fetchClientSecret = useCallback(async () => {\n    console.log(\"fetching client secret and sending this body: \", JSON.stringify({\n      items: cart\n    }));\n    return await fetch(\"http://localhost:4242/create-checkout-session\", {\n      method: \"POST\",\n      // mode: \"no-cors\",\n      headers: {\n        //is this necessary?\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        items: cart\n      })\n    }).then(res => res.json()).then(data => data.clientSecret);\n  }, [cart]);\n  useEffect(() => {\n    fetchClientSecret();\n  }, [cart, fetchClientSecret]);\n  // const fetchClientSecret = useCallback(async () => {\n  //     console.log(\"fetching client secret and sending this body: \", JSON.stringify({ items: cart }));\n  //     try {\n  //       const response = await fetch(\"http://localhost:4242/create-checkout-session\", {\n  //         method: \"POST\",\n  //         headers: {\n  //           \"Content-Type\": \"application/json\"\n  //         },\n  //         body: JSON.stringify({ items: cart })\n  //       });\n\n  //       if (!response.ok) {\n  //         throw new Error(`Server error: ${response.statusText}`);\n  //       }\n\n  //       const data = await response.json();\n  //       return data.clientSecret;\n  //     } catch (error) {\n  //       console.error(\"Failed to fetch client secret:\", error);\n  //     }\n  //   }, [cart]);\n\n  const options = {\n    fetchClientSecret\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"checkout\",\n    children: /*#__PURE__*/_jsxDEV(EmbeddedCheckoutProvider, {\n      stripe: stripePromise,\n      options: options,\n      children: /*#__PURE__*/_jsxDEV(EmbeddedCheckout, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n_s(Checkout, \"Iev4kAlFWQIJiDz7XvcD6B4WuJY=\");\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["useCallback","useEffect","React","loadStripe","EmbeddedCheckoutProvider","EmbeddedCheckout","jsxDEV","_jsxDEV","stripePromise","Checkout","cart","_s","fetchClientSecret","console","log","JSON","stringify","items","fetch","method","headers","body","then","res","json","data","clientSecret","options","id","children","stripe","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/carolinebromberg/Desktop/cozy-threads/frontend/src/Components/Checkout.js"],"sourcesContent":["import { useCallback, useEffect } from 'react';\nimport * as React from 'react';\nimport {loadStripe} from '@stripe/stripe-js';\nimport {\n  EmbeddedCheckoutProvider,\n  EmbeddedCheckout\n} from '@stripe/react-stripe-js';\nconst stripePromise = loadStripe('pk_live_51PhD3vRpA6VhXFHy5CdMHlEl7CtPIOHZ2Fu7dQunAd3K469wh3QlBpjBdN1q3EAom5VC66VTihMoO9dvEH1abBvk00hqBsWmcq');\n\nconst Checkout = ({cart}) => {\n    const fetchClientSecret = useCallback(async () => {\n        console.log(\"fetching client secret and sending this body: \", JSON.stringify({ items: cart }));\n        return await fetch(\"http://localhost:4242/create-checkout-session\", {\n            method: \"POST\",\n            // mode: \"no-cors\",\n            headers: { //is this necessary?\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({ items: cart })\n        })\n        .then((res) => res.json())\n        .then((data) => data.clientSecret);\n    }, [cart]);\n\n    useEffect(() => {\n        fetchClientSecret();\n    }, [cart, fetchClientSecret]);\n    // const fetchClientSecret = useCallback(async () => {\n    //     console.log(\"fetching client secret and sending this body: \", JSON.stringify({ items: cart }));\n    //     try {\n    //       const response = await fetch(\"http://localhost:4242/create-checkout-session\", {\n    //         method: \"POST\",\n    //         headers: {\n    //           \"Content-Type\": \"application/json\"\n    //         },\n    //         body: JSON.stringify({ items: cart })\n    //       });\n    \n    //       if (!response.ok) {\n    //         throw new Error(`Server error: ${response.statusText}`);\n    //       }\n    \n    //       const data = await response.json();\n    //       return data.clientSecret;\n    //     } catch (error) {\n    //       console.error(\"Failed to fetch client secret:\", error);\n    //     }\n    //   }, [cart]);\n    \n    const options = {fetchClientSecret};\n\n    return (\n        <div id=\"checkout\">\n            <EmbeddedCheckoutProvider\n                stripe={stripePromise}\n                options={options}\n            >\n                <EmbeddedCheckout/>\n            </EmbeddedCheckoutProvider>\n        </div>\n    );\n}\n\nexport default Checkout;"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAC9C,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,SAAQC,UAAU,QAAO,mBAAmB;AAC5C,SACEC,wBAAwB,EACxBC,gBAAgB,QACX,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AACjC,MAAMC,aAAa,GAAGL,UAAU,CAAC,6GAA6G,CAAC;AAE/I,MAAMM,QAAQ,GAAGA,CAAC;EAACC;AAAI,CAAC,KAAK;EAAAC,EAAA;EACzB,MAAMC,iBAAiB,GAAGZ,WAAW,CAAC,YAAY;IAC9Ca,OAAO,CAACC,GAAG,CAAC,gDAAgD,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEC,KAAK,EAAEP;IAAK,CAAC,CAAC,CAAC;IAC9F,OAAO,MAAMQ,KAAK,CAAC,+CAA+C,EAAE;MAChEC,MAAM,EAAE,MAAM;MACd;MACAC,OAAO,EAAE;QAAE;QACP,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEN,IAAI,CAACC,SAAS,CAAC;QAAEC,KAAK,EAAEP;MAAK,CAAC;IACxC,CAAC,CAAC,CACDY,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,IAAKA,IAAI,CAACC,YAAY,CAAC;EACtC,CAAC,EAAE,CAAChB,IAAI,CAAC,CAAC;EAEVT,SAAS,CAAC,MAAM;IACZW,iBAAiB,CAAC,CAAC;EACvB,CAAC,EAAE,CAACF,IAAI,EAAEE,iBAAiB,CAAC,CAAC;EAC7B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMe,OAAO,GAAG;IAACf;EAAiB,CAAC;EAEnC,oBACIL,OAAA;IAAKqB,EAAE,EAAC,UAAU;IAAAC,QAAA,eACdtB,OAAA,CAACH,wBAAwB;MACrB0B,MAAM,EAAEtB,aAAc;MACtBmB,OAAO,EAAEA,OAAQ;MAAAE,QAAA,eAEjBtB,OAAA,CAACF,gBAAgB;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC1B,CAAC;AAEd,CAAC;AAAAvB,EAAA,CApDKF,QAAQ;AAAA0B,EAAA,GAAR1B,QAAQ;AAsDd,eAAeA,QAAQ;AAAC,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}